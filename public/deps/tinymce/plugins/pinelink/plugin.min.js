tinymce.PluginManager.add('pinelink', function(editor, url) {
// Add a button that opens a window
    editor.addButton('pinelink', {
        text: 'Pine Link',
        icon: "link",
        onclick: function() {
            // Open window with a specific url
            editor.windowManager.open({
                title: 'Pine Link Picker',
                url: '/plugins/link.picker.html',
                width: 800,
                height: 400
            });
        }
    });
    // Adds a menu item to the tools menu
    editor.addMenuItem('pinelink', {
        text: 'Pine Link',
        icon: "link",
        context: 'insert',
        shortcut: "Ctrl+K",
        prependToContext: true,
        onclick: function() {
            // Open window with a specific url
            editor.windowManager.open({
                title: 'Pine Link Picker',
                url: '/plugins/link.picker.html',
                width: 800,
                height: 400
            });
        }
    });

    editor.addShortcut("Ctrl+K", "", function(){
        editor.windowManager.open({
            title: 'Pine Link Picker',
            url: '/plugins/link.picker.html',
            width: 800,
            height: 400
        });
    });
});